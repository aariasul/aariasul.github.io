<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitaci√≥n de boda ‚Äî Paola & Giancarlo</title>
  <meta name="description" content="Acomp√°√±anos a celebrar nuestra boda. Paola & Giancarlo ‚Äî 25 de octubre de 2025." />

  <!-- Open Graph (para compartir) -->
  <meta property="og:title" content="Invitaci√≥n de boda ‚Äî Paola & Giancarlo" />
  <meta property="og:description" content="Acomp√°√±anos a celebrar nuestra boda. 25 de octubre de 2025." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="img/couple-hero.jpg" />
  <meta property="og:locale" content="es_CR" />

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Pinyon+Script&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg: rgb(243,242,238);
      --card: rgb(251,250,248);
      --ink: #2a2a2a;
      --muted: #696969;
      --accent: rgba(0,0,0,0.08);
      --shadow: 0 8px 24px rgba(0,0,0,.08);
      --radius: 15px;
      --radius-lg: 25px;
      --ease: cubic-bezier(.16,1,.3,1);
      --brand-ink: #1f2937;
      --title: "Pinyon Script", cursive;
      --base: "Quicksand", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

      /* Punto de partida (desde abajo) del bloque de nombres en el hero */
      --names-start-offset: 60%;
    }

    html, body {
      height: 100%;
      scroll-behavior: smooth;
      overflow-x: hidden; /* evita scroll horizontal */
    }

    body{
      margin:0; background: var(--bg); color: var(--ink); font-family: var(--base);
      line-height: 1.6; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
    }

    .wrap{ width: 80%; max-width: 960px; margin: 0 auto; padding: 24px 0 64px; }

    h1, h2, h3, .script { font-family: var(--title); font-weight: 400; letter-spacing: .2px; color: var(--brand-ink); margin: 0 0 8px; }
    h1 { font-size: clamp(36px, 6vw, 60px); line-height: 1.1; }
    h2 { font-size: clamp(30px, 5vw, 42px); line-height: 1.15; }
    h3 { font-size: clamp(22px, 3.8vw, 28px); line-height: 1.2; }

    p { margin: 0 0 12px; }
    .muted { color: var(--muted); }

    .card{
      background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow);
      padding: clamp(16px, 3.2vw, 28px); margin: 28px auto;
    }

    .center { text-align: center; }
    .btn{
      display: inline-block; background: var(--bg); color: var(--ink); border-radius: var(--radius-lg);
      padding: 12px 18px; text-decoration: none; box-shadow: var(--shadow); border: 1px solid var(--accent);
      transition: transform .18s var(--ease), box-shadow .18s var(--ease); cursor: pointer; font-weight: 600;
    }
    .btn:focus-visible{ outline: 3px solid #94a3b8; outline-offset: 2px; }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 12px 28px rgba(0,0,0,.1); }
    .btn:active { transform: translateY(0); box-shadow: var(--shadow); }

    /* ===== Control de audio ‚Äî versi√≥n DESKTOP (p√≠ldora con bot√≥n + switch) ===== */
    .audio-ctrl{
      position: fixed; top: 14px; right: 14px; z-index: 100;
      background: var(--card); border: 1px solid var(--accent); border-radius: 999px;
      padding: 8px 12px; box-shadow: var(--shadow); display: flex; align-items: center; gap: 10px; user-select: none;
    }
    .audio-ctrl .label{ font-size: 14px; }
    #playButton{
      background: white; color: black; padding: 8px 12px; border: none; cursor: pointer; border-radius: 10px; opacity: .95; font: inherit;
    }
    .switch { position: relative; display: inline-block; width: 46px; height: 26px; opacity: .95; }
    .switch input { display: none; }
    .slider { position: absolute; cursor: pointer; inset: 0; background-color: #c99c; transition: .25s; border-radius: 8px; }
    .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background: white; transition: .25s; border-radius: 6px; }
    input:checked + .slider { background-color: #e76e55; }
    input:checked + .slider:before { transform: translateX(20px); }

    /* ===== Control de audio ‚Äî versi√≥n M√ìVIL (bot√≥n √∫nico ‚ñ∂/‚è∏) ===== */
    .audio-btn{
      display: none;           /* visible solo en m√≥vil */
      position: fixed;
      top: 5px; right: 5px; z-index: 100;
      width: 48px; height: 48px;
      border: 1px solid rgba(0,0,0,0.08);
      border-radius: 12px;
      background: #ffffff; color: #111;
      box-shadow: 0 8px 24px rgba(0,0,0,.08);
      cursor: pointer; user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .18s var(--ease), box-shadow .18s var(--ease), background .18s, color .18s;
    }
    .audio-btn::before{
      content: "‚ñ∂";
      display: grid; place-items: center;
      font-size: 18px; line-height: 1;
    }
    .audio-btn[aria-pressed="true"]{ background: #e76e55; color: #fff; }
    .audio-btn[aria-pressed="true"]::before{ content: "‚è∏"; }
    .audio-btn:hover{ transform: translateY(-1px); box-shadow: 0 12px 28px rgba(0,0,0,.1); }
    .audio-btn:active{ transform: translateY(0); box-shadow: 0 8px 24px rgba(0,0,0,.08); }

    /* Logo */
    .logo{ width: 100px; height: 100px; object-fit: contain; display:block; margin: 24px auto 10px; border-radius: 12px; }

    /* Hero */
    .hero{
      position: relative; margin: 12px auto 8px; width: min(90%, 1200px); border-radius: 18px; overflow: clip; box-shadow: var(--shadow);
    }
    .hero img{
      display:block; width:100%; height:auto;
      opacity: 0; transform: scale(1.01);
      transition: opacity 2s ease, transform 2s ease;
    }
    .hero.loaded img{ opacity: 1; transform: scale(1); }

    /* Bloque de nombres: punto de partida y animaciones */
    .hero .names{
      position: absolute; inset: 0; display: grid; place-items: center;
      opacity: 0;
      transform: translateY(var(--names-start-offset, 60%)); /* arranca abajo */
      padding: 12px; text-align: center;
      will-change: transform, opacity;
    }
    .hero.loaded .names{
      /* 2 animaciones en paralelo con delay de 4s */
      animation:
        fadeInNames 2s ease 4s forwards,
        riseNames   3s cubic-bezier(.16,1,.3,1) 4s forwards;
    }

    /* >>> Sombra del t√≠tulo (tu versi√≥n preferida) <<< */
    .hero .names .script{
      color: rgb(251,250,248);
      text-shadow:
        0 3px 10px rgba(0,0,0,1),  /* sombra principal m√°s profunda */
        1px 0 1px rgba(0,0,0,1),   /* halo cercano para contorno */
        -1px 0 1px rgba(0,0,0,1),  /* halo cercano para contorno */
        0 1px 1px rgba(0,0,0,1),   /* halo cercano para contorno */
        0 -1px 1px rgba(0,0,0,1),  /* halo cercano para contorno */
        0 0 18px  rgba(0,0,0,.85); /* resplandor suave extra */
      font-size: clamp(34px, 6vw, 72px);
      line-height: 1.1;
    }

    /* Keyframes para el bloque de nombres */
    @keyframes fadeInNames{
      from{ opacity: 0; }
      to  { opacity: 1; }
    }
    @keyframes riseNames{
      from{ transform: translateY(var(--names-start-offset, 60%)); }
      to  { transform: translateY(0); }
    }

    .date { text-align:center; font-size: 18px; margin-top: 8px; }

    /* Countdown */
    .countdown{ display: grid; grid-template-columns: repeat(4, minmax(60px, 1fr)); gap: 12px; margin-top: 16px; }
    .cd-box{ text-align:center; background: #fff; border-radius: 12px; padding: 12px; border: 1px solid var(--accent); box-shadow: var(--shadow); }
    .cd-num{ font-size: clamp(22px, 5vw, 34px); font-weight: 700; }
    .cd-label{ font-size: 12px; letter-spacing: .8px; text-transform: uppercase; color: var(--muted); }

    /* On-scroll base */
    .observe{ opacity: 0; transform: translateY(12px); transition: opacity .9s var(--ease), transform .9s var(--ease); }
    .observe.in-view{ opacity: 1; transform: none; }

    /* === FIX de desbordes en im√°genes animadas === */
    /* Los sections recortan; la animaci√≥n vive en el hijo .fullw */
    .fly-left, .fly-right{
      overflow: hidden; /* recorta lo que se anima fuera del contenedor */
      margin: 34px auto; width:min(90%,1200px);
    }
    .fullw{ width: 100%; }
    .fullw img{ width:100%; height:auto; display:block; }

    /* Estado inicial animado en el contenido interno */
    .fly-left .fullw,
    .fly-right .fullw{
      opacity: 0;
      transition: opacity 1.8s var(--ease), transform 1.8s var(--ease);
      will-change: transform, opacity;
    }
    .fly-left .fullw{  transform: translateX(-110%); }
    .fly-right .fullw{ transform: translateX(110%); }

    /* Al entrar en vista: resetea transform y muestra */
    .fly-left.in-view .fullw,
    .fly-right.in-view .fullw{
      opacity: 1;
      transform: translateX(0);
    }

    /* Modal */
    .modal-backdrop{ position: fixed; inset: 0; background: rgba(0,0,0,.35); display:none; align-items: center; justify-content: center; padding: 20px; z-index: 100; }
    .modal-backdrop.open{ display:flex; }
    .modal{ background: var(--card); border-radius: 16px; width: min(92vw, 480px); box-shadow: 0 18px 50px rgba(0,0,0,.2); border: 1px solid var(--accent); padding: 18px; position: relative; }
    .modal h3{ margin: 0 0 8px; }
    .modal p{ margin: 0 0 16px; }
    .modal .actions{ display:flex; gap: 10px; flex-wrap: wrap; }
    .modal .close{ background: transparent; border: none; font-size: 16px; color: var(--muted); cursor: pointer; position: absolute; top: 10px; right: 16px; }

    /* Formulario */
    .form{ display:grid; gap: 12px; margin-top: 8px; grid-template-columns: 1fr; }
    .field{ display:grid; gap: 6px; }
    label{ font-weight: 600; }
    input[type="text"], input[type="number"]{ font: inherit; padding: 12px; border-radius: 10px; border: 1px solid var(--accent); background: #fff; }
    .help{ font-size: 12px; color: var(--muted); }

    /* Clase para decorativos: centrado + ancho 200px */
    .decor{
      display: block;
      margin: 0 auto;
      width: 200px;
      height: auto;
    }

    /* Accesibilidad y responsive */
    @media (prefers-reduced-motion: reduce){
      .observe, .hero img, .hero .names,
      .fly-left .fullw, .fly-right .fullw {
        transition: none !important;
        transform: none !important;
        opacity: 1 !important;
        animation: none !important;
      }
      .audio-ctrl, .audio-btn{ transition: none !important; }
    }

    @media (max-width: 560px){
      /* M√≥vil: countdown en una sola fila (4 columnas) */
      .countdown{
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 8px;
      }
      .cd-box{ padding: 8px; }
      .cd-num{ font-size: clamp(18px, 6vw, 22px); }
      .cd-label{ font-size: 10px; letter-spacing: .6px; }
      /* En m√≥vil ocultamos la p√≠ldora desktop y mostramos el bot√≥n compacto */
      .audio-ctrl{ display: none; }
      .audio-btn{ display: block; width: 44px; height: 44px; border-radius: 10px; }
      /* M√°rgenes compactos ya aplicados en .fly-left/.fly-right */
    }
  </style>
</head>
<body>

  <!-- Control de audio ‚Äî Desktop (p√≠ldora: icono + bot√≥n + switch) -->
  <div class="audio-ctrl" id="audioCtrl">
    <span class="label" aria-hidden="true">üéµ</span>
    <button type="button" id="playButton" aria-pressed="false">Activar melod√≠a</button>
    <label class="switch" aria-label="Interruptor de m√∫sica">
      <input type="checkbox" id="playToggle" />
      <span class="slider round" aria-hidden="true"></span>
    </label>
  </div>

  <!-- Control de audio ‚Äî M√≥vil (bot√≥n √∫nico) -->
  <button class="audio-btn" id="audioBtn" aria-pressed="false" aria-label="Reproducir melod√≠a"></button>

  <!-- Audio -->
  <audio id="bgAudio" preload="metadata" loop>
    <source src="audio/song.mp3" type="audio/mpeg" />
    <source src="audio/song.m4a" type="audio/mp4" />
    <source src="audio/song.ogg" type="audio/ogg" />
  </audio>

  <main class="wrap" id="top">
    <!-- Logo (SVG) -->
    <img class="logo" src="img/couple-logo.svg" width="100" height="100" alt="Logotipo de la pareja (editable)" />

    <!-- Hero con nombres sobre la imagen -->
    <section class="hero" id="hero">
      <img src="img/couple-hero.jpg" alt="Fotograf√≠a principal de la pareja (editable)" loading="eager" decoding="async" />
      <div class="names">
        <div class="script">Paola &amp; Giancarlo</div>
      </div>
    </section>
    <div class="date muted">25 de octubre de 2025 ‚Ä¢ 10:00 a. m.</div>

    <!-- Intro + Countdown -->
    <section class="card observe">
      <div class="center">
        <p>Nos llena de alegr√≠a invitarte a compartir con nosotros este d√≠a tan especial.</p>
        <div class="countdown" id="countdown" aria-live="polite">
          <div class="cd-box"><div class="cd-num" id="cd-days">0</div><div class="cd-label">D√≠as</div></div>
          <div class="cd-box"><div class="cd-num" id="cd-hours">0</div><div class="cd-label">Horas</div></div>
          <div class="cd-box"><div class="cd-num" id="cd-mins">0</div><div class="cd-label">Minutos</div></div>
          <div class="cd-box"><div class="cd-num" id="cd-secs">0</div><div class="cd-label">Segundos</div></div>
        </div>
        <div style="margin-top:16px;">
          <img src="img/decor-100.svg" alt="Elemento decorativo (editable)" loading="lazy" decoding="async" class="decor" />
        </div>
      </div>
    </section>

    <!-- Imagen fly-in izquierda -->
    <section class="fly-left">
      <div class="fullw">
        <img src="img/couple-left.jpg" alt="Fotograf√≠a de la pareja (izquierda, editable)" loading="lazy" decoding="async" />
      </div>
    </section>

    <!-- Ceremonia -->
    <section class="card observe" id="ceremonia">
      <div class="center">
        <img src="img/decor-100.svg" alt="Decoraci√≥n ceremonia (editable)" loading="lazy" decoding="async" class="decor observe" />
        <h2 style="margin-top:8px;">Ceremonia Religiosa</h2>
        <p><strong>Iglesia cat√≥lica de Paquera</strong></p>
        <p><strong>Hora:</strong> 10:00 a. m.</p>
        <div style="margin-top:12px;">
          <button class="btn" data-open-route="church">C√≥mo llegar</button>
        </div>
      </div>
    </section>

    <!-- Recepci√≥n -->
    <section class="card observe" id="recepcion">
      <div class="center">
        <img src="img/decor-100.svg" alt="Decoraci√≥n recepci√≥n (editable)" loading="lazy" decoding="async" class="decor observe" />
        <h2 style="margin-top:8px;">Recepci√≥n</h2>
        <p><strong>Bella Vista House ‚Äî Paquera</strong></p>
        <p><strong>Hora:</strong> Posterior a la ceremonia</p>
        <div style="margin-top:12px;">
          <button class="btn" data-open-route="reception">C√≥mo llegar</button>
        </div>
      </div>
    </section>

    <!-- Imagen fly-in derecha -->
    <section class="fly-right">
      <div class="fullw">
        <img src="img/couple-right.jpg" alt="Fotograf√≠a de la pareja (derecha, editable)" loading="lazy" decoding="async" />
      </div>
    </section>

    <!-- Programa -->
    <section class="card observe">
      <h2 class="center">Programa de la boda</h2>
      <div class="fullw" style="margin-top:10px;">
        <img src="img/programa.svg" alt="Programa de la boda (SVG editable)" loading="lazy" decoding="async" />
      </div>
    </section>

    <!-- Sugerencia de regalos -->
    <section class="card observe">
      <h2 class="center">Sugerencia de regalos</h2>
      <div style="display:grid; gap:16px; grid-template-columns: 1fr; margin-top:12px;">
        <div class="card" style="margin:0;">
          <div class="center">
            <img src="img/decor-100.svg" alt="Decoraci√≥n regalos (editable)" loading="lazy" decoding="async" class="decor" />
            <p style="margin-top:8px;">Tu presencia es nuestro mejor regalo. Si deseas obsequiarnos, puedes hacerlo con un detalle simb√≥lico.</p>
          </div>
        </div>
        <div class="card" style="margin:0;">
          <div class="center">
            <img src="img/decor-100.svg" alt="Decoraci√≥n regalos (editable)" loading="lazy" decoding="async" class="decor" />
            <p style="margin-top:8px;">Tambi√©n agradecemos aportes para nuestra nueva etapa juntos.</p>
          </div>
        </div>
        <div class="card" style="margin:0;">
          <div class="center">
            <img src="img/decor-100.svg" alt="Decoraci√≥n regalos (editable)" loading="lazy" decoding="async" class="decor" />
            <p style="margin-top:8px;">Si prefieres, puedes llevar un sobre el d√≠a del evento.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Imagen + texto adultos -->
    <section class="observe" style="margin: 34px auto; width:min(90%,1200px);">
      <div class="fullw observe">
        <img src="img/couple-hero2.jpg" alt="Fotograf√≠a de la pareja (editable)" loading="lazy" decoding="async" />
      </div>
      <div class="card observe center" style="margin-top:16px;">
        <p>Para que todos disfrutemos plenamente, nuestra boda ser√° un evento solo para adultos. Estaremos encantados de celebrar con ustedes.</p>
      </div>
    </section>

    <!-- Vestimenta -->
    <section class="card observe">
      <div class="center">
        <img src="img/decor-100.svg" alt="Decoraci√≥n vestimenta (editable)" loading="lazy" decoding="async" class="decor" />
        <h2 style="margin-top:8px;">Vestimenta</h2>
        <h3>Vestimenta formal</h3>
        <p class="muted" style="max-width:60ch; margin: 6px auto 0;">
          Celebramos nuestro amor en tonos de beige y verde olivo. Les sugerimos vestir en esta paleta para ser parte de la armon√≠a de este d√≠a especial.
        </p>
      </div>
    </section>

    <!-- Confirmar asistencia -->
    <section class="card observe" id="rsvp">
      <div class="center">
        <img src="img/decor-100.svg" alt="Decoraci√≥n confirmar asistencia (editable)" loading="lazy" decoding="async" class="decor" />
        <h2 style="margin-top:8px;">Confirmar Asistencia</h2>
        <p class="muted">Por favor confirma antes del <strong>10 de octubre de 2025</strong>.</p>
        <p class="help">Completa tu nombre y la cantidad de personas (incluy√©ndote). Al presionar el bot√≥n, se abrir√° WhatsApp con tu mensaje listo para enviar.</p>
      </div>
      <form class="form" onsubmit="return openWhatsapp(event)">
        <div class="field">
          <label for="rsvpName">Nombre</label>
          <input id="rsvpName" name="name" type="text" placeholder="Ej. Mar√≠a P√©rez" autocomplete="name" required />
        </div>
        <div class="field">
          <label for="rsvpQty">Cantidad</label>
          <input id="rsvpQty" name="quantity" type="number" min="1" step="1" placeholder="Ej. 2" required />
        </div>
        <div class="center" style="margin-top:6px;">
          <button class="btn" type="submit">Enviar confirmaci√≥n por WhatsApp</button>
        </div>
        <p class="help center" style="margin-top:8px;">Este bot√≥n no env√≠a datos al servidor; solo abre WhatsApp Web o la app en tu tel√©fono.</p>
      </form>
    </section>

    <!-- Despedida -->
    <section class="card observe center">
      <p>Gracias por acompa√±arnos en este momento tan importante para nosotros, con cari√±o:</p>
      <h2>Paola &amp; Giancarlo</h2>
    </section>

  </main>

  <!-- Modal rutas -->
  <div class="modal-backdrop" id="routeModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <button class="close" type="button" aria-label="Cerrar" id="routeClose">‚úï</button>
      <h3 id="routeTitle">¬øC√≥mo llegar?</h3>
      <p class="muted" id="routeDesc">Elige tu app de navegaci√≥n favorita.</p>
      <div class="actions">
        <a id="routeWaze" class="btn" target="_blank" rel="noopener">Abrir en Waze</a>
        <a id="routeGMaps" class="btn" target="_blank" rel="noopener">Abrir en Google Maps</a>
      </div>
    </div>
  </div>

  <script>
    // Configuraci√≥n
    const WEDDING_TITLE = "Paola y Giancarlo";
    const WEDDING_DATE_ISO = "2025-10-25T10:00:00-06:00";
    const RSVP_PHONE = "50660032092";
    const CHURCH   = { label: "Iglesia cat√≥lica de Paquera",  query: "R398+W5Q, Provincia de Puntarenas, Paquera" };
    const RECEPTION= { label: "Bella Vista House ‚Äî Paquera",  query: "V3X7+MF, Provincia de Puntarenas, Gigante" };

    // ====== Audio (compartido por ambos controles) ======
    const myAudio   = document.getElementById("bgAudio");
    const playToggle= document.getElementById("playToggle");
    const playButton= document.getElementById("playButton");
    const audioBtn  = document.getElementById("audioBtn");

    function setPlayingState(on){
      if(on){
        myAudio.volume = 1.0;
        myAudio.play().then(()=>{
          if (playToggle) playToggle.checked = true;
          if (playButton){
            playButton.textContent = "Pausar melod√≠a";
            playButton.setAttribute("aria-pressed","true");
          }
          if (audioBtn){
            audioBtn.setAttribute("aria-pressed","true");
            audioBtn.setAttribute("aria-label","Pausar melod√≠a");
          }
        }).catch(e=>{
          alert("No se pudo reproducir el audio: " + e.message + "\\nVerifica el formato (MP3/M4A/OGG) y que el archivo exista en /audio.");
          console.error(e);
          if (playToggle) playToggle.checked = false;
          if (playButton){
            playButton.setAttribute("aria-pressed","false");
            playButton.textContent = "Activar melod√≠a";
          }
          if (audioBtn){
            audioBtn.setAttribute("aria-pressed","false");
            audioBtn.setAttribute("aria-label","Reproducir melod√≠a");
          }
        });
      }else{
        myAudio.pause();
        if (playToggle) playToggle.checked = false;
        if (playButton){
          playButton.setAttribute("aria-pressed","false");
          playButton.textContent = "Activar melod√≠a";
        }
        if (audioBtn){
          audioBtn.setAttribute("aria-pressed","false");
          audioBtn.setAttribute("aria-label","Reproducir melod√≠a");
        }
      }
    }

    if (playToggle) playToggle.addEventListener("change", () => setPlayingState(playToggle.checked));
    if (playButton) playButton.addEventListener("click", () => setPlayingState(myAudio.paused));
    if (audioBtn)   audioBtn.addEventListener("click",   () => setPlayingState(myAudio.paused));

    myAudio.addEventListener("error", ()=>{
      const err = myAudio.error;
      let msg = "Error de audio.";
      if(err){ msg += " C√≥digo: " + err.code + " (1=aborted, 2=network, 3=decode, 4=src no soportado)"; }
      alert(msg + "\\nPrueba con otro formato (MP3/M4A/OGG) o re-convierte con ffmpeg.");
      console.error("Audio error:", err);
      setPlayingState(false);
    });

    // Hero load (dispara las animaciones del hero al cargar la imagen)
    (function(){
      const hero = document.getElementById('hero');
      const img = hero.querySelector('img');
      if(img.complete){ hero.classList.add('loaded'); }
      else { img.addEventListener('load', () => hero.classList.add('loaded')); }
    })();

    // On-scroll animations
    const io = new IntersectionObserver((entries)=>{
      for(const e of entries){
        if(e.isIntersecting){
          e.target.classList.add('in-view');
          io.unobserve(e.target);
        }
      }
    }, { threshold: 0.18 });
    document.querySelectorAll('.observe, .fly-left, .fly-right').forEach(el => io.observe(el));

    // Countdown
    const end = new Date(WEDDING_DATE_ISO).getTime();
    const elDays  = document.getElementById('cd-days');
    const elHours = document.getElementById('cd-hours');
    const elMins  = document.getElementById('cd-mins');
    const elSecs  = document.getElementById('cd-secs');
    function updateCountdown(){
      const now = Date.now();
      let diff = Math.max(0, end - now);
      const s = Math.floor(diff / 1000);
      const days = Math.floor(s / 86400);
      const hours = Math.floor((s % 86400) / 3600);
      const mins = Math.floor((s % 3600) / 60);
      const secs = s % 60;
      elDays.textContent  = String(days);
      elHours.textContent = String(hours).padStart(2,'0');
      elMins.textContent  = String(mins).padStart(2,'0');
      elSecs.textContent  = String(secs).padStart(2,'0');
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);

    // Modal rutas
    const modal = document.getElementById('routeModal');
    const routeTitle = document.getElementById('routeTitle');
    const routeWaze = document.getElementById('routeWaze');
    const routeGMaps = document.getElementById('routeGMaps');
    const btnClose = document.getElementById('routeClose');

    function openRouteModal(kind){
      const data = kind === 'church' ? CHURCH : RECEPTION;
      const q = encodeURIComponent(data.query);
      routeTitle.textContent = `¬øC√≥mo llegar a ${data.label}?`;
      routeWaze.href  = `https://waze.com/ul?q=${q}&navigate=yes`;
      routeGMaps.href = `https://www.google.com/maps/search/?api=1&query=${q}`;
      modal.classList.add('open'); modal.setAttribute('aria-hidden', 'false');
    }
    function closeRouteModal(){ modal.classList.remove('open'); modal.setAttribute('aria-hidden', 'true'); }
    document.querySelectorAll('[data-open-route]').forEach(b=> b.addEventListener('click', ()=> openRouteModal(b.getAttribute('data-open-route'))));
    btnClose.addEventListener('click', closeRouteModal);
    modal.addEventListener('click', (e)=>{ if(e.target === modal) closeRouteModal(); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeRouteModal(); });

    // RSVP WhatsApp
    function openWhatsapp(ev){
      ev.preventDefault();
      const name = document.getElementById('rsvpName').value.trim();
      const qty  = document.getElementById('rsvpQty').value.trim();
      if(!name){ alert("Por favor escribe tu nombre."); return false; }
      if(!qty || isNaN(qty) || Number(qty) < 1){ alert("Ingresa una cantidad v√°lida (m√≠nimo 1)."); return false; }
      const niceDate = "25 de octubre de 2025";
      const msg = `Hola, soy ${name}. Confirmo mi asistencia a la boda de ${WEDDING_TITLE} el ${niceDate} con ${qty} persona(s). ¬°Muchas gracias!`;
      const encoded = encodeURIComponent(msg);
      const url = `https://wa.me/${RSVP_PHONE}?text=${encoded}`;
      window.open(url, "_blank", "noopener");
      return false;
    }
    window.openWhatsapp = openWhatsapp;
  </script>
</body>
</html>
